"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[871],{3090:function(e,t,n){n(2791);var r=n(6534),i=n(184);t.Z=function(e){var t,n=e.label,a=e.onClick,s=e.variant,l=void 0===s?"primary":s,c=e.iconVariant,d=void 0===c?"black":c,o=e.type,u=void 0===o?"button":o,f=e.icon,h=e.disabled,x=e.wide,p={primary:"".concat(x&&"w-full"," bg-red-default hover:bg-red-secondary text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),secondary:"".concat(x&&"w-full"," bg-gray-secondary hover:bg-bg-hover text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),white:"".concat(x&&"w-full"," bg-white hover:bg-bg-hover text-black-default py-2 px-4 rounded inline-flex justify-center items-center gap-2")},v={backgroundColor:h?"#d1d5db":"",color:h?"#222222":""};return t=f?r.qq[f]:null,(0,i.jsxs)("button",{type:u,className:p[l],onClick:a,disabled:h,style:v,children:[f&&t&&(0,i.jsx)(t,{className:{black:"w-5 h-5 fill-text-default inline-block",white:"w-5 h-5 fill-text-default inline-block"}[d]}),n]})}},8514:function(e,t,n){n.d(t,{C:function(){return s}});var r=n(1933),i=n(4195),a=n(8788),s=function(){var e=(0,a.a)().currentUser;return(0,r.useQuery)(["user",e],(function(){return(0,i.hL)(null===e||void 0===e?void 0:e.uid)}),{refetchInterval:1e4})}},4387:function(e,t,n){var r=n(9439),i=n(2791);t.Z=function(){var e=(0,i.useState)(window.innerWidth<768),t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,i.useEffect)((function(){var e=function(){a(window.innerWidth<768)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}},5871:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(4165),i=n(1413),a=n(5861),s=n(9439),l=n(7689),c=n(9230),d=n(2791),o=n(4387),u=n(3090),f=n(184),h=function(e){var t=e.src,n=e.title,r=e.isError,i=e.isLoading;return r?(0,f.jsx)("div",{children:"Error fetching trailer"}):i?(0,f.jsx)("div",{children:"Loading..."}):(0,f.jsx)("div",{className:"w-full h-[300px] md:h-[500px] px-5 md:px-10 my-20",children:(0,f.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t),title:n,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%",height:"100%"})})},x=n(8788),p=n(4195),v=n(9631),m=n(8514),g=n(1933),b=n(7118),w=n(1595),y=function(){var e=(0,l.UO)().movieId,t=(0,d.useState)(),n=(0,s.Z)(t,2),y=n[0],j=n[1],k=(0,c.$G)(),N=k.t,Z=k.i18n,E=(0,d.useState)(Z.language),L=(0,s.Z)(E,2),C=L[0],S=L[1],I=(0,o.Z)(),W=(0,x.a)().userLoggedIn,_=(0,d.useState)(!1),O=(0,s.Z)(_,2),z=O[0],F=O[1],D=(0,m.C)().data,Q=function(e,t){var n={};return t&&(n=(0,w.vw)(1,e,t)),(0,g.useQuery)(["movieData",1,e,t],(function(){return(0,b.Of)(n)}),{refetchOnWindowFocus:!1})}(C,y),q=Q.data,U=Q.isError,A=Q.isLoading,G=function(e,t){var n={};return t&&(n=(0,w.IA)(t,e)),(0,g.useQuery)(["trailersData",e,n],(function(){return(0,b.Of)(n)}),{enabled:!!n,refetchOnWindowFocus:!1})}(C,y),T=G.data,V=G.isError,$=G.isLoading,B=function(e,t){var n=e.find((function(e){return e.id.toString()===t}));F(!!n)},H=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D||!q){e.next=19;break}return t=(0,i.Z)((0,i.Z)({},q),{},{genre_ids:[q.genres[0].id]}),e.next=4,(0,p.uo)();case 4:return n=e.sent,a=n.db,s=(0,v.doc)(a,"users",D.docId),l=D.watchList,c=[],c=z?(0,p.FZ)(l,t):(0,p.Ci)(l,t),e.prev=10,e.next=13,(0,v.updateDoc)(s,{watchList:c});case 13:B(c,t.id),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),console.log("Error when trying to add movie to watchlist: "+e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(){return e.apply(this,arguments)}}(),J=null===T||void 0===T?void 0:T.results.find((function(e){return"Trailer"===e.type}));if((0,d.useEffect)((function(){D&&q&&B(D.watchList,q.id.toString())}),[q,Z.language,D]),(0,d.useEffect)((function(){e&&j(e)}),[]),(0,d.useEffect)((function(){S(Z.language)}),[Z.language]),A)return(0,f.jsx)("div",{children:"Loading..."});if(U||!q)return(0,f.jsx)("div",{children:"Error loading data or no data available"});var K=q.backdrop_path,M=q.poster_path,P=q.title,R=q.status,X=q.runtime,Y=q.release_date,ee=q.genres,te=q.overview;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"h-[130svh] bg-black-black-absolute overflow-hidden",children:(0,f.jsxs)("div",{className:"h-full w-full bg-cover bg-center z-10 overflow-hidden relative",style:{backgroundImage:"url(https://image.tmdb.org/t/p/original".concat(I?M:K,")")},children:[(0,f.jsx)("h2",{className:"absolute hidden md:inline-block pl-10 pt-10 text-4xl",children:P}),(0,f.jsx)("div",{className:"absolute w-full bottom-0 left-0 mx-auto max-w-[1680px] pt-20",children:(0,f.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center md:items-start p-6 pb-3 md:p-10 md:pt-6",children:[(0,f.jsx)("div",{className:"absolute inset-0 w-full h-full backdrop-saturate-[190%] backdrop-blur-3xl -z-10 mask-gradient",style:{backgroundColor:"rgba(40, 40, 40, .5)"}}),(0,f.jsx)("div",{className:"md:hidden max-w-[300px] text-text-default text-3xl text-center ",children:(0,f.jsx)("h2",{children:P})}),(0,f.jsxs)("div",{className:"text-center text-text-secondary text-sm md:text-left md:min-w-[150px] md:order-2",children:[ee.length>0&&(0,f.jsxs)("span",{children:[ee[0].name," "]}),(0,f.jsxs)("span",{children:[R," "]}),(0,f.jsxs)("span",{className:"whitespace-nowrap",children:[Y," "]}),(0,f.jsx)("span",{children:X+N("min")})]}),W&&(0,f.jsx)("div",{className:"md:order-1 min-w-[150px] ",children:(0,f.jsx)(u.Z,{label:N(z?"inWatchlist":"toWatchlist"),onClick:H,variant:"white"})}),(0,f.jsx)("div",{className:"text-text-secondary order-3",children:(0,f.jsx)("span",{children:te})})]})})]})}),J&&(0,f.jsx)(h,{src:J.key,title:J.name,isError:V,isLoading:$})]})}}}]);
//# sourceMappingURL=871.2e432a10.chunk.js.map