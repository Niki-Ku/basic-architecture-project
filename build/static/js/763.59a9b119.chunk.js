"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[763],{7644:function(e,t,n){var r=n(3807),a=n(184);t.Z=function(e){var t=e.movies,n=e.genres,o=e.user;return(0,a.jsx)("div",{className:"gap-2 md:gap-5 sm:gap-4 justify-evenly pt-4 mb-4 grid grid-cols-cards",children:t.map((function(e,t){return(0,a.jsx)(r.Z,{cardData:e,genres:n,link:"../movies/".concat(e.id),user:o},"".concat(t,"-").concat(e.title))}))})}},3807:function(e,t,n){n.d(t,{Z:function(){return w}});var r,a=n(4165),o=n(5861),i=n(9439),l=n(9230),u=n(1087),s=n(2791),c=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,a=e.titleId,o=f(e,c);return s.createElement("svg",d({width:"800px",height:"800px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?s.createElement("title",{id:a},n):null,r||(r=s.createElement("path",{d:"M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z",stroke:"#000000",strokeWidth:2,strokeLinejoin:"round"})))}var g=s.forwardRef(p),v=(n.p,n(8788)),m=n(4195),h=n.p+"static/media/no-image.47fbc531b9a02fba1837.webp",b=n(4387),x=n(184),w=function(e){var t=e.cardData,r=e.genres,c=e.link,d=e.user,f=(0,l.$G)().t,p=(0,v.a)().userLoggedIn,w=(0,s.useState)(!1),j=(0,i.Z)(w,2),y=j[0],C=j[1],N=(0,b.Z)(),O=function(e,t){var n=e.find((function(e){return e.id===t.id}));(null===n||void 0===n?void 0:n.id)===t.id?C(!0):C(!1)};(0,s.useEffect)((function(){d&&O(d.watchList,t)}),[t,d]);var k=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var r,o,i,l,u,s,c,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=23;break}return e.next=3,(0,m.uo)();case 3:return r=e.sent,o=r.db,e.next=7,Promise.all([n.e(825),n.e(631)]).then(n.bind(n,9631));case 7:return i=e.sent,l=i.doc,u=i.updateDoc,s=l(o,"users",d.docId),c=d.watchList,f=[],f=y?(0,m.FZ)(c,t):(0,m.Ci)(c,t),e.prev=14,e.next=17,u(s,{watchList:f});case 17:O(f,t),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log("Error when trying to add movie to watchlist: "+e.t0);case 23:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"group snap-start relative w-[230px]",children:[p&&(0,x.jsx)("button",{onClick:function(){return k()},className:"\n\t\t\t\t\t\tw-7 h-7 absolute top-5 right-2 bg-gray-static rounded-full justify-center items-center z-10 flex group-hover:flex\n\t\t\t\t\t\t".concat(N?"":"hidden","\n\t\t\t\t\t"),"aria-label":f(""),children:(0,x.jsx)(g,{className:"w-5 h-5",style:y?{}:{fill:"transparent"}})}),(0,x.jsxs)(u.rU,{onClick:function(){return window.scrollTo({top:0})},to:c,children:[(0,x.jsxs)("div",{className:"overflow-hidden rounded-2xl relative w-[230px] aspect-[3/4]",children:[(0,x.jsx)("div",{className:"absolute w-full h-full pointer-events-none bg-black-black-30 -top-full group-hover:top-0 right-0 z-10"}),t.poster_path?(0,x.jsx)("img",{className:"w-full h-full object-cover",loading:"lazy",src:"https://image.tmdb.org/t/p/w300".concat(t.poster_path),alt:t.title+f("movie")}):(0,x.jsx)("img",{className:"w-full h-full object-cover",src:h,alt:t.title+f("movie")})]}),(0,x.jsx)("h4",{className:"font-semibold",children:t.title}),r&&r.map((function(e,n){if(t.genre_ids)return Number(e.id)===t.genre_ids[0]&&(0,x.jsx)("p",{className:"text-xs",children:e.name},e.id+n)}))]})]})}},5847:function(e,t,n){n.d(t,{Z:function(){return v}});var r,a=n(9439),o=n(1087),i=n(2791),l=["title","titleId"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){var n=e.title,a=e.titleId,o=s(e,l);return i.createElement("svg",u({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?i.createElement("title",{id:a},n):null,r||(r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"})))}var d=i.forwardRef(c),f=(n.p,n(3598)),p=n(9230),g=n(184),v=function(e){var t=e.links,n=e.query,r=e.onQueryChange,l=e.onSubmit,u=e.placeholder,s=(0,p.$G)().t,c=t.filter((function(e){return e.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())})),v=(0,f.Z)(c),m=(0,i.useState)(!1),h=(0,a.Z)(m,2),b=h[0],x=h[1],w=(0,i.useRef)(null),j=function(e){e.preventDefault(),x(!1),w.current&&w.current.blur(),l&&l(e)};return(0,g.jsx)("div",{className:"h-max w-full rounded p-0.5 z-20 relative text-left\n      bg-gradient-to-r from-[#e50914] from-[-0.08%] via-[#c94ff5] via-[81%] to-[#5b79f1] to-[99.92%]\n      ".concat(n.length>0&&"rounded-br-none rounded-bl-none"),children:(0,g.jsxs)("div",{className:"rounded overflow-hidden ".concat(n.length>0&&"rounded-br-none rounded-bl-none"),children:[(0,g.jsxs)("form",{className:"relative",onSubmit:function(e){return j(e)},children:[(0,g.jsx)("input",{onChange:function(e){return r(e.target.value)},onFocus:function(){return x(!0)},ref:w,type:"search",value:n,placeholder:s(u||"typeQuestionTopicOrIssue"),className:"w-full bg-bg-primary text-text-default placeholder:text-text-secondary text-base pl-[52px] appearance-none pr-4 py-[9px] focus:outline-none"}),(0,g.jsx)(d,{className:"w-6 h-6 fill-text-default absolute top-[9px] left-3.5 pointer-events-none"})]}),(0,g.jsx)("div",{className:"absolute left-0 w-full block rounded-br rounded-bl bg-gradient-to-r from-[#e50914] from-[-0.08%] via-[#c94ff5] via-[81%] to-[#5b79f1] to-[99.92%]",children:(0,g.jsx)("div",{className:"bg-bg-primary mt-0 m-[2px] rounded-br rounded-bl",children:(0,g.jsx)("ul",{className:"".concat(c.length>0&&n.length>0&&"flex flex-col gap-2 p-1 border-t border-black-10"),children:b&&n.length>0&&v.slice(0,5).map((function(e,t){return(0,g.jsx)("li",{className:"bg-bg-primary text-text-default mx-4 hover:bg-bg-secondary cursor-pointer border-b border-text-transparent-10 last:border-0 py-[9px]",children:(0,g.jsx)(o.rU,{onClick:function(){return window.scrollTo({top:0})},to:e.path,className:"text-base w-full h-full block z-10",children:s(e.name)})},"seach-item-".concat(e.name,"-").concat(t))}))})})})]})})}},8514:function(e,t,n){n.d(t,{C:function(){return i}});var r=n(1933),a=n(4195),o=n(8788),i=function(){var e=(0,o.a)().currentUser;return(0,r.useQuery)(["user",e],(function(){return(0,a.hL)(null===e||void 0===e?void 0:e.uid)}),{refetchInterval:1e4})}},3598:function(e,t,n){var r=n(9439),a=n(2791);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=(0,a.useState)(e),o=(0,r.Z)(n,2),i=o[0],l=o[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){l(e)}),t);return function(){return clearTimeout(n)}}),[e,t]),i}},4421:function(e,t,n){n.d(t,{F:function(){return i}});var r=n(1933),a=n(7118),o=n(1595),i=function(e){return(0,r.useQuery)(["genresData",e],(function(){return(0,a.Of)((0,o.BQ)(e))}))}},4387:function(e,t,n){var r=n(9439),a=n(2791);t.Z=function(){var e=(0,a.useState)(window.innerWidth<768),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,a.useEffect)((function(){var e=function(){o(window.innerWidth<768)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}},8836:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(9439),a=n(2791),o=n(9230),i=n(5847),l=n(3598),u=n(5471),s=n(7644),c=n(1933),d=n(7118),f=n(8514),p=n(4421),g=function(e,t,n){return(0,c.useMutation)((function(e){var t=e.page,n=e.searchValue,r=e.lang;return(0,d.gK)(t,n,r)}))},v=n(184),m=function(){return(0,v.jsx)("div",{className:"gap-2 md:gap-5 sm:gap-4 justify-evenly pt-4 mb-4 grid grid-cols-cards",children:Array.from({length:20},(function(e,t){return t})).map((function(e){return(0,v.jsx)("div",{className:"w-[230px] aspect-[3/4]"},e)}))})},h=function(){var e=(0,o.$G)().i18n,t=(0,a.useState)(e.language),n=(0,r.Z)(t,2),h=n[0],b=n[1],x=(0,a.useState)(""),w=(0,r.Z)(x,2),j=w[0],y=w[1],C=((0,l.Z)(j),(0,a.useRef)([])),N=(0,a.useState)(1),O=(0,r.Z)(N,2),k=O[0],Z=O[1],L=(0,f.C)().data,E=(0,p.F)(h).data,S=function(e,t){return(0,c.useQuery)(["allMovies",e,t],(function(){return(0,d.oX)(t,e)}),{keepPreviousData:!0})}(h,k),I=S.data,P=S.error,z=S.isLoading,M=g(),Q=M.data,_=M.mutate,D=M.isError,R=M.isLoading,T=g(),V=T.data,F=T.mutate,B=(0,a.useMemo)((function(){return Q||I}),[I,Q]);null!==V&&void 0!==V&&V.results&&(C.current=V.results.slice(0,5).map((function(e){return{name:e.title,path:"../movies/".concat(e.id)}})));return(0,a.useEffect)((function(){b(e.language)}),[e.language]),D||P?(0,v.jsx)("div",{children:"Error loading data..."}):B?(0,v.jsxs)("div",{className:"w-[90%] min-h-[100svh] max-w-[1640px] mx-auto",children:[(0,v.jsx)("div",{className:"my-4",children:(0,v.jsx)(i.Z,{links:C.current,query:j,onQueryChange:function(e){y(e),F({page:k,searchValue:j,lang:h})},onSubmit:function(){_({page:k,searchValue:j,lang:h})},placeholder:"searchMovies"})}),R||z?(0,v.jsx)(m,{}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.Z,{movies:B.results,genres:null===E||void 0===E?void 0:E.genres,user:L}),(0,v.jsx)(u.g,{classNames:{cursor:"bg-red-default",item:"bg-text-default text-bg-primary",wrapper:"mx-auto"},onChange:function(e){Z(e),Q&&Q.results.length>0&&_({page:e,searchValue:j,lang:h}),window.scrollTo({top:0})},initialPage:k,total:null===B||void 0===B?void 0:B.total_pages})]})]}):(0,v.jsx)(m,{})}}}]);
//# sourceMappingURL=763.59a9b119.chunk.js.map