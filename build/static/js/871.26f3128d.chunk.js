"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[871],{3090:function(e,t,r){r(2791);var n=r(6534),a=r(184);t.Z=function(e){var t,r=e.label,i=e.onClick,l=e.variant,s=void 0===l?"primary":l,c=e.iconVariant,d=void 0===c?"black":c,o=e.type,u=void 0===o?"button":o,x=e.icon,f=e.disabled,h=e.wide,p={primary:"".concat(h&&"w-full"," bg-red-default hover:bg-red-secondary text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),secondary:"".concat(h&&"w-full"," bg-gray-secondary hover:bg-bg-hover text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),white:"".concat(h&&"w-full"," bg-white hover:bg-bg-hover text-black-default py-2 px-4 rounded inline-flex justify-center items-center gap-2")},m={backgroundColor:f?"#d1d5db":"",color:f?"#222222":""};return t=x?n.qq[x]:null,(0,a.jsxs)("button",{type:u,className:p[s],onClick:i,disabled:f,style:m,children:[x&&t&&(0,a.jsx)(t,{className:{black:"w-5 h-5 fill-text-default inline-block",white:"w-5 h-5 fill-text-default inline-block"}[d]}),r]})}},5871:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(4165),a=r(1413),i=r(5861),l=r(9439),s=r(7689),c=r(9230),d=r(2791),o=r(4387),u=r(3090),x=r(184),f=function(e){var t=e.src,r=e.title,n=e.isError,a=e.isLoading;return n?(0,x.jsx)("div",{children:"Error fetching trailer"}):a?(0,x.jsx)("div",{children:"Loading trailer..."}):(0,x.jsx)("div",{className:"w-full h-[300px] md:h-[500px] px-5 md:px-10 my-20",children:(0,x.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t),title:r,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%",height:"100%"})})},h=r(8788),p=r(4195),m=r(9631),v=r(8514),g=r(1933),b=r(7118),w=r(1595),y=function(){var e=(0,s.UO)().movieId,t=(0,d.useState)(),r=(0,l.Z)(t,2),y=r[0],j=r[1],k=(0,c.$G)(),N=k.t,Z=k.i18n,E=(0,d.useState)(Z.language),L=(0,l.Z)(E,2),C=L[0],S=L[1],_=(0,o.Z)(),I=(0,h.a)().userLoggedIn,O=(0,d.useState)(!1),F=(0,l.Z)(O,2),W=F[0],D=F[1],q=(0,v.C)().data,z=function(e,t){var r={};return t&&(r=(0,w.vw)(1,e,t)),(0,g.useQuery)(["movieData",1,e,t],(function(){return(0,b.Of)(r)}),{refetchOnWindowFocus:!1})}(C,y),Q=z.data,A=z.isError,G=z.isLoading,T=function(e,t){var r={};return t&&(r=(0,w.IA)(t,e)),(0,g.useQuery)(["trailersData",e,r],(function(){return(0,b.Of)(r)}),{enabled:!!r,refetchOnWindowFocus:!1})}(C,y),U=T.data,V=T.isError,$=T.isLoading,B=function(e,t){var r=e.find((function(e){return e.id.toString()===t}));D(!!r)},H=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,l,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q||!Q){e.next=19;break}return t=(0,a.Z)((0,a.Z)({},Q),{},{genre_ids:[Q.genres[0].id]}),e.next=4,(0,p.uo)();case 4:return r=e.sent,i=r.db,l=(0,m.doc)(i,"users",q.docId),s=q.watchList,c=[],c=W?(0,p.FZ)(s,t):(0,p.Ci)(s,t),e.prev=10,e.next=13,(0,m.updateDoc)(l,{watchList:c});case 13:B(c,t.id),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),console.log("Error when trying to add movie to watchlist: "+e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(){return e.apply(this,arguments)}}(),J=null===U||void 0===U?void 0:U.results.find((function(e){return"Trailer"===e.type}));if((0,d.useEffect)((function(){q&&Q&&B(q.watchList,Q.id.toString())}),[Q,Z.language,q]),(0,d.useEffect)((function(){e&&j(e)}),[e]),(0,d.useEffect)((function(){S(Z.language)}),[Z.language]),G)return(0,x.jsx)("div",{className:"h-[130svh]",children:"Loading..."});if(A||!Q)return(0,x.jsx)("div",{children:"Error loading data or no data available"});var K=Q.backdrop_path,M=Q.poster_path,P=Q.title,R=Q.status,X=Q.runtime,Y=Q.release_date,ee=Q.genres,te=Q.overview;return(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"h-[130svh] bg-black-black-absolute overflow-hidden",children:(0,x.jsxs)("div",{className:"h-full w-full bg-cover bg-center z-10 overflow-hidden relative",style:{backgroundImage:"url(https://image.tmdb.org/t/p/original".concat(_?M:K,")")},children:[(0,x.jsx)("h2",{className:"absolute hidden md:inline-block pl-10 pt-10 text-4xl",children:P}),(0,x.jsx)("div",{className:"absolute w-full bottom-0 left-0 mx-auto max-w-[1680px] pt-20",children:(0,x.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center md:items-start p-6 pb-3 md:p-10 md:pt-6",children:[(0,x.jsx)("div",{className:"absolute inset-0 w-full h-full backdrop-saturate-[190%] backdrop-blur-3xl -z-10 mask-gradient",style:{backgroundColor:"rgba(40, 40, 40, .5)"}}),(0,x.jsx)("div",{className:"md:hidden max-w-[300px] text-text-default text-3xl text-center ",children:(0,x.jsx)("h2",{children:P})}),(0,x.jsxs)("div",{className:"text-center text-text-secondary text-sm md:text-left md:min-w-[150px] md:order-2",children:[ee.length>0&&(0,x.jsxs)("span",{children:[ee[0].name," "]}),(0,x.jsxs)("span",{children:[R," "]}),(0,x.jsxs)("span",{className:"whitespace-nowrap",children:[Y," "]}),(0,x.jsx)("span",{children:X+N("min")})]}),I&&(0,x.jsx)("div",{className:"md:order-1 min-w-[150px] ",children:(0,x.jsx)(u.Z,{label:N(W?"inWatchlist":"toWatchlist"),onClick:H,variant:"white"})}),(0,x.jsx)("div",{className:"text-text-secondary order-3",children:(0,x.jsx)("span",{children:te})})]})})]})}),J&&(0,x.jsx)(f,{src:J.key,title:J.name,isError:V,isLoading:$})]})}}}]);
//# sourceMappingURL=871.26f3128d.chunk.js.map