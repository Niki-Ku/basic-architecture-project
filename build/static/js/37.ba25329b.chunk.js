"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[37],{1595:function(e,t,n){n.d(t,{BQ:function(){return l},IA:function(){return d},nw:function(){return p},ss:function(){return s},vw:function(){return c},w6:function(){return f}});var r=n(4165),a=n(5861),o=n(1243),i="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxZWQ0ODJlNGY4ZGM1MGYwY2JjOTliMTUyMGNlZTk0MCIsIm5iZiI6MTczMTY3OTg1NS4zNzQ4OTg0LCJzdWIiOiI2NzMzODBlN2JlZmQ0OWMwYmI2NTg2Y2MiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.hes-rcLEPWkGVMJM3VZmbTvlCbP0dxvrHQ3hnzzfJJA",u="https://api.themoviedb.org/3/",c=function(e,t,n){return{method:"GET",url:"".concat(u,"movie/").concat(n),params:{language:t,page:e.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(i)}}},s=function(e,t){return{method:"GET",url:"".concat(u,"/trending/movie/day"),params:{language:t,page:e.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(i)}}},l=function(e){return{method:"GET",url:"".concat(u,"/genre/movie/list"),params:{language:e},headers:{accept:"application/json",Authorization:"Bearer ".concat(i)}}},d=function(e,t){return{method:"GET",url:"".concat(u,"movie/").concat(e,"/videos"),params:{language:t},headers:{accept:"application/json",Authorization:"Bearer ".concat(i)}}},f=function(e,t,n){return{method:"GET",url:"".concat(u,"search/movie"),params:{query:e,include_adult:"false",language:t,page:n.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(i)}}},p=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.request(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},7644:function(e,t,n){var r=n(3807),a=n(184);t.Z=function(e){var t=e.movies,n=e.genres,o=e.user;return(0,a.jsx)("div",{className:"gap-2 md:gap-5 sm:gap-4 justify-evenly pt-4 mb-4 grid grid-cols-cards",children:t.map((function(e,t){return(0,a.jsx)(r.Z,{cardData:e,genres:n,link:"../movies/".concat(e.id),user:o},"".concat(t,"-").concat(e.title))}))})}},2338:function(e,t,n){var r=n(184);t.Z=function(){return(0,r.jsx)("div",{className:"gap-2 md:gap-5 sm:gap-4 justify-evenly pt-4 mb-4 grid grid-cols-cards",children:Array.from({length:20},(function(e,t){return t})).map((function(e){return(0,r.jsx)("div",{className:"w-[230px] aspect-[3/4]"},e)}))})}},3807:function(e,t,n){n.d(t,{Z:function(){return w}});var r,a=n(4165),o=n(5861),i=n(9439),u=n(9230),c=n(1087),s=n(2791),l=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,a=e.titleId,o=f(e,l);return s.createElement("svg",d({width:"800px",height:"800px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?s.createElement("title",{id:a},n):null,r||(r=s.createElement("path",{d:"M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z",stroke:"#000000",strokeWidth:2,strokeLinejoin:"round"})))}var v=s.forwardRef(p),h=(n.p,n(8788)),g=n(4195),m=n.p+"static/media/no-image.47fbc531b9a02fba1837.webp",b=n(4387),x=n(184),w=function(e){var t=e.cardData,r=e.genres,l=e.link,d=e.user,f=(0,u.$G)().t,p=(0,h.a)().userLoggedIn,w=(0,s.useState)(!1),y=(0,i.Z)(w,2),j=y[0],Z=y[1],O=(0,b.Z)(),C=function(e,t){var n=e.find((function(e){return e.id===t.id}));(null===n||void 0===n?void 0:n.id)===t.id?Z(!0):Z(!1)};(0,s.useEffect)((function(){d&&C(d.watchList,t)}),[t,d]);var N=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var r,o,i,u,c,s,l,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=23;break}return e.next=3,(0,g.uo)();case 3:return r=e.sent,o=r.db,e.next=7,Promise.all([n.e(825),n.e(631)]).then(n.bind(n,9631));case 7:return i=e.sent,u=i.doc,c=i.updateDoc,s=u(o,"users",d.docId),l=d.watchList,f=[],f=j?(0,g.FZ)(l,t):(0,g.Ci)(l,t),e.prev=14,e.next=17,c(s,{watchList:f});case 17:C(f,t),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),console.log("Error when trying to add movie to watchlist: "+e.t0);case 23:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"group snap-start relative w-[230px]",children:[p&&(0,x.jsx)("button",{onClick:function(){return N()},className:"\n\t\t\t\t\t\tw-7 h-7 absolute top-5 right-2 bg-gray-static rounded-full justify-center items-center z-10 flex group-hover:flex\n\t\t\t\t\t\t".concat(O?"":"hidden","\n\t\t\t\t\t"),"aria-label":f(""),children:(0,x.jsx)(v,{className:"w-5 h-5",style:j?{}:{fill:"transparent"}})}),(0,x.jsxs)(c.rU,{onClick:function(){return window.scrollTo({top:0})},to:l,children:[(0,x.jsxs)("div",{className:"overflow-hidden rounded-2xl relative w-[230px] aspect-[3/4]",children:[(0,x.jsx)("div",{className:"absolute w-full h-full pointer-events-none bg-black-black-30 -top-full group-hover:top-0 right-0 z-10"}),t.poster_path?(0,x.jsx)("img",{className:"w-full h-full object-cover",loading:"lazy",src:"https://image.tmdb.org/t/p/w300".concat(t.poster_path),alt:t.title+f("movie")}):(0,x.jsx)("img",{className:"w-full h-full object-cover",src:m,alt:t.title+f("movie")})]}),(0,x.jsx)("h4",{className:"font-semibold",children:t.title}),r&&r.map((function(e,n){return t.genre_ids?Number(e.id)===t.genre_ids[0]&&(0,x.jsx)("p",{className:"text-xs",children:e.name},e.id+n):null}))]})]})}},5847:function(e,t,n){n.d(t,{Z:function(){return h}});var r,a=n(9439),o=n(1087),i=n(2791),u=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e,t){var n=e.title,a=e.titleId,o=s(e,u);return i.createElement("svg",c({width:"800px",height:"800px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?i.createElement("title",{id:a},n):null,r||(r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"})))}var d=i.forwardRef(l),f=(n.p,n(3598)),p=n(9230),v=n(184),h=function(e){var t=e.links,n=e.query,r=e.onQueryChange,u=e.onSubmit,c=e.placeholder,s=(0,p.$G)().t,l=t.filter((function(e){return e.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())})),h=(0,f.Z)(l),g=(0,i.useState)(!1),m=(0,a.Z)(g,2),b=m[0],x=m[1],w=(0,i.useRef)(null),y=function(e){e.preventDefault(),x(!1),w.current&&w.current.blur(),u&&u(e)};return(0,v.jsx)("div",{className:"h-max w-full rounded p-0.5 z-20 relative text-left\n      bg-gradient-to-r from-[#e50914] from-[-0.08%] via-[#c94ff5] via-[81%] to-[#5b79f1] to-[99.92%]\n      ".concat(n.length>0&&"rounded-br-none rounded-bl-none"),children:(0,v.jsxs)("div",{className:"rounded overflow-hidden ".concat(n.length>0&&"rounded-br-none rounded-bl-none"),children:[(0,v.jsxs)("form",{className:"relative",onSubmit:function(e){return y(e)},children:[(0,v.jsx)("input",{onChange:function(e){return r(e.target.value)},onFocus:function(){return x(!0)},ref:w,type:"search",value:n,placeholder:s(c||"typeQuestionTopicOrIssue"),className:"w-full bg-bg-primary text-text-default placeholder:text-text-secondary text-base pl-[52px] appearance-none pr-4 py-[9px] focus:outline-none"}),(0,v.jsx)(d,{className:"w-6 h-6 fill-text-default absolute top-[9px] left-3.5 pointer-events-none"})]}),(0,v.jsx)("div",{className:"absolute left-0 w-full block rounded-br rounded-bl bg-gradient-to-r from-[#e50914] from-[-0.08%] via-[#c94ff5] via-[81%] to-[#5b79f1] to-[99.92%]",children:(0,v.jsx)("div",{className:"bg-bg-primary mt-0 m-[2px] rounded-br rounded-bl",children:(0,v.jsx)("ul",{className:"".concat(l.length>0&&n.length>0&&"flex flex-col gap-2 p-1 border-t border-black-10"),children:b&&n.length>0&&h.slice(0,5).map((function(e,t){return(0,v.jsx)("li",{className:"bg-bg-primary text-text-default mx-4 hover:bg-bg-secondary cursor-pointer border-b border-text-transparent-10 last:border-0 py-[9px]",children:(0,v.jsx)(o.rU,{onClick:function(){return window.scrollTo({top:0})},to:e.path,className:"text-base w-full h-full block z-10",children:s(e.name)})},"seach-item-".concat(e.name,"-").concat(t))}))})})})]})})}},7118:function(e,t,n){n.d(t,{Of:function(){return u},gK:function(){return c},oX:function(){return s}});var r=n(4165),a=n(5861),o=n(1243),i=n(1595),u=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.request(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a){var u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,i.w6)(n,a,t),e.prev=1,e.next=4,o.Z.request(u);case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),new Error("Error, failed to fetch data");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.ss)(t,n),e.prev=1,e.next=4,o.Z.request(a);case 4:return u=e.sent,e.abrupt("return",u.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),new Error("Error, failed to fetch data");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},8514:function(e,t,n){n.d(t,{C:function(){return i}});var r=n(1933),a=n(4195),o=n(8788),i=function(){var e=(0,o.a)().currentUser;return(0,r.useQuery)(["user",e],(function(){return(0,a.hL)(null===e||void 0===e?void 0:e.uid)}),{refetchInterval:1e4})}},3598:function(e,t,n){var r=n(9439),a=n(2791);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=(0,a.useState)(e),o=(0,r.Z)(n,2),i=o[0],u=o[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){u(e)}),t);return function(){return clearTimeout(n)}}),[e,t]),i}},4421:function(e,t,n){n.d(t,{F:function(){return i}});var r=n(1933),a=n(7118),o=n(1595),i=function(e){return(0,r.useQuery)(["genresData",e],(function(){return(0,a.Of)((0,o.BQ)(e))}))}},4387:function(e,t,n){var r=n(9439),a=n(2791);t.Z=function(){var e=(0,a.useState)(window.innerWidth<768),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,a.useEffect)((function(){var e=function(){o(window.innerWidth<768)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}},901:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(9439),a=n(2791),o=n(9230),i=n(5847),u=n(3598),c=n(5471),s=n(7644),l=n(1933),d=n(7118),f=n(8514),p=n(4421),v=function(e,t,n){return(0,l.useMutation)((function(e){var t=e.page,n=e.searchValue,r=e.lang;return(0,d.gK)(t,n,r)}))},h=n(2338),g=n(184),m=function(){var e=(0,o.$G)().i18n,t=(0,a.useState)(e.language),n=(0,r.Z)(t,2),m=n[0],b=n[1],x=(0,a.useState)(""),w=(0,r.Z)(x,2),y=w[0],j=w[1],Z=((0,u.Z)(y),(0,a.useRef)([])),O=(0,a.useState)(1),C=(0,r.Z)(O,2),N=C[0],k=C[1],E=(0,f.C)().data,z=(0,p.F)(m).data,I=function(e,t){return(0,l.useQuery)(["allMovies",e,t],(function(){return(0,d.oX)(t,e)}),{keepPreviousData:!0})}(m,N),L=I.data,M=I.error,T=I.isLoading,S=v(),G=S.data,Q=S.mutate,J=S.isError,B=S.isLoading,P=v(),V=P.data,W=P.mutate,Y=(0,a.useMemo)((function(){return G||L}),[L,G]);null!==V&&void 0!==V&&V.results&&(Z.current=V.results.slice(0,5).map((function(e){return{name:e.title,path:"../movies/".concat(e.id)}})));return(0,a.useEffect)((function(){b(e.language)}),[e.language]),J||M?(0,g.jsx)("div",{children:"Error loading data..."}):Y?(0,g.jsxs)("div",{className:"w-[90%] min-h-[100svh] max-w-[1640px] mx-auto",children:[(0,g.jsx)("div",{className:"my-4",children:(0,g.jsx)(i.Z,{links:Z.current,query:y,onQueryChange:function(e){j(e),W({page:N,searchValue:y,lang:m})},onSubmit:function(){Q({page:N,searchValue:y,lang:m})},placeholder:"searchMovies"})}),B||T?(0,g.jsx)(h.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.Z,{movies:Y.results,genres:null===z||void 0===z?void 0:z.genres,user:E}),(0,g.jsx)(c.g,{classNames:{cursor:"bg-red-default",item:"bg-text-default text-bg-primary",wrapper:"mx-auto"},onChange:function(e){k(e),G&&G.results.length>0&&Q({page:e,searchValue:y,lang:m}),window.scrollTo({top:0})},initialPage:N,total:null===Y||void 0===Y?void 0:Y.total_pages})]})]}):(0,g.jsx)(h.Z,{})}}}]);
//# sourceMappingURL=37.ba25329b.chunk.js.map