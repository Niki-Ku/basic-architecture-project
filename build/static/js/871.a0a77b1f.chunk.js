"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[871],{1595:function(e,t,r){r.d(t,{BQ:function(){return l},IA:function(){return d},nw:function(){return p},ss:function(){return u},vw:function(){return s},w6:function(){return f}});var n=r(4165),a=r(5861),i=r(1243),c="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxZWQ0ODJlNGY4ZGM1MGYwY2JjOTliMTUyMGNlZTk0MCIsIm5iZiI6MTczMTY3OTg1NS4zNzQ4OTg0LCJzdWIiOiI2NzMzODBlN2JlZmQ0OWMwYmI2NTg2Y2MiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.hes-rcLEPWkGVMJM3VZmbTvlCbP0dxvrHQ3hnzzfJJA",o="https://api.themoviedb.org/3/",s=function(e,t,r){return{method:"GET",url:"".concat(o,"movie/").concat(r),params:{language:t,page:e.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(c)}}},u=function(e,t){return{method:"GET",url:"".concat(o,"/trending/movie/day"),params:{language:t,page:e.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(c)}}},l=function(e){return{method:"GET",url:"".concat(o,"/genre/movie/list"),params:{language:e},headers:{accept:"application/json",Authorization:"Bearer ".concat(c)}}},d=function(e,t){return{method:"GET",url:"".concat(o,"movie/").concat(e,"/videos"),params:{language:t},headers:{accept:"application/json",Authorization:"Bearer ".concat(c)}}},f=function(e,t,r){return{method:"GET",url:"".concat(o,"search/movie"),params:{query:e,include_adult:"false",language:t,page:r.toString()},headers:{accept:"application/json",Authorization:"Bearer ".concat(c)}}},p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.request(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},3090:function(e,t,r){r(2791);var n=r(6534),a=r(184);t.Z=function(e){var t,r=e.label,i=e.onClick,c=e.variant,o=void 0===c?"primary":c,s=e.iconVariant,u=void 0===s?"black":s,l=e.type,d=void 0===l?"button":l,f=e.icon,p=e.disabled,h=e.wide,v={primary:"".concat(h&&"w-full"," bg-red-default hover:bg-red-secondary text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),secondary:"".concat(h&&"w-full"," bg-gray-secondary hover:bg-bg-hover text-text-default py-2 px-4 rounded inline-flex justify-center items-center gap-2"),white:"".concat(h&&"w-full"," bg-white hover:bg-bg-hover text-black-default py-2 px-4 rounded inline-flex justify-center items-center gap-2")},m={backgroundColor:p?"#d1d5db":"",color:p?"#222222":""};return t=f?n.qq[f]:null,(0,a.jsxs)("button",{type:d,className:v[o],onClick:i,disabled:p,style:m,children:[f&&t&&(0,a.jsx)(t,{className:{black:"w-5 h-5 fill-text-default inline-block",white:"w-5 h-5 fill-text-default inline-block"}[u]}),r]})}},7118:function(e,t,r){r.d(t,{Of:function(){return o},gK:function(){return s},oX:function(){return u}});var n=r(4165),a=r(5861),i=r(1243),c=r(1595),o=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.request(t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,c.w6)(r,a,t),e.prev=1,e.next=4,i.Z.request(o);case 4:return s=e.sent,e.abrupt("return",s.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),new Error("Error, failed to fetch data");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,c.ss)(t,r),e.prev=1,e.next=4,i.Z.request(a);case 4:return o=e.sent,e.abrupt("return",o.data);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0),new Error("Error, failed to fetch data");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()},8514:function(e,t,r){r.d(t,{C:function(){return c}});var n=r(1933),a=r(4195),i=r(8788),c=function(){var e=(0,i.a)().currentUser;return(0,n.useQuery)(["user",e],(function(){return(0,a.hL)(null===e||void 0===e?void 0:e.uid)}),{refetchInterval:1e4})}},4387:function(e,t,r){var n=r(9439),a=r(2791);t.Z=function(){var e=(0,a.useState)(window.innerWidth<768),t=(0,n.Z)(e,2),r=t[0],i=t[1];return(0,a.useEffect)((function(){var e=function(){i(window.innerWidth<768)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),r}},5871:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(4165),a=r(1413),i=r(5861),c=r(9439),o=r(7689),s=r(9230),u=r(2791),l=r(4387),d=r(3090),f=r(184),p=function(e){var t=e.src,r=e.title,n=e.isError,a=e.isLoading;return n?(0,f.jsx)("div",{children:"Error fetching trailer"}):a?(0,f.jsx)("div",{children:"Loading trailer..."}):(0,f.jsx)("div",{className:"w-full h-[300px] md:h-[500px] px-5 md:px-10 my-20",children:(0,f.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(t),title:r,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%",height:"100%"})})},h=r(8788),v=r(4195),m=r(9631),x=r(8514),g=r(1933),w=r(7118),b=r(1595),y=function(){var e=(0,o.UO)().movieId,t=(0,u.useState)(),r=(0,c.Z)(t,2),y=r[0],Z=r[1],j=(0,s.$G)(),k=j.t,E=j.i18n,N=(0,u.useState)(E.language),z=(0,c.Z)(N,2),I=z[0],L=z[1],O=(0,l.Z)(),T=(0,h.a)().userLoggedIn,C=(0,u.useState)(!1),M=(0,c.Z)(C,2),J=M[0],G=M[1],S=(0,x.C)().data,W=function(e,t){var r={};return t&&(r=(0,b.vw)(1,e,t)),(0,g.useQuery)(["movieData",1,e,t],(function(){return(0,w.Of)(r)}),{refetchOnWindowFocus:!1})}(I,y),Q=W.data,Y=W.isError,A=W.isLoading,B=function(e,t){var r={};return t&&(r=(0,b.IA)(t,e)),(0,g.useQuery)(["trailersData",e,r],(function(){return(0,w.Of)(r)}),{enabled:!!r,refetchOnWindowFocus:!1})}(I,y),q=B.data,_=B.isError,X=B.isLoading,D=function(e,t){var r=e.find((function(e){return e.id.toString()===t}));G(!!r)},F=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,r,i,c,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S||!Q){e.next=19;break}return t=(0,a.Z)((0,a.Z)({},Q),{},{genre_ids:[Q.genres[0].id]}),e.next=4,(0,v.uo)();case 4:return r=e.sent,i=r.db,c=(0,m.doc)(i,"users",S.docId),o=S.watchList,s=[],s=J?(0,v.FZ)(o,t):(0,v.Ci)(o,t),e.prev=10,e.next=13,(0,m.updateDoc)(c,{watchList:s});case 13:D(s,t.id),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),console.log("Error when trying to add movie to watchlist: "+e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(){return e.apply(this,arguments)}}(),U=null===q||void 0===q?void 0:q.results.find((function(e){return"Trailer"===e.type}));if((0,u.useEffect)((function(){S&&Q&&D(S.watchList,Q.id.toString())}),[Q,E.language,S]),(0,u.useEffect)((function(){e&&Z(e)}),[e]),(0,u.useEffect)((function(){L(E.language)}),[E.language]),A)return(0,f.jsx)("div",{className:"h-[130svh]",children:"Loading..."});if(Y||!Q)return(0,f.jsx)("div",{children:"Error loading data or no data available"});var V=Q.backdrop_path,P=Q.poster_path,H=Q.title,K=Q.status,$=Q.runtime,R=Q.release_date,ee=Q.genres,te=Q.overview;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"h-[130svh] bg-black-black-absolute overflow-hidden",children:(0,f.jsxs)("div",{className:"h-full w-full bg-cover bg-center z-10 overflow-hidden relative",style:{backgroundImage:"url(https://image.tmdb.org/t/p/original".concat(O?P:V,")")},children:[(0,f.jsx)("h2",{className:"absolute hidden md:inline-block pl-10 pt-10 text-4xl",children:H}),(0,f.jsx)("div",{className:"absolute w-full bottom-0 left-0 mx-auto max-w-[1680px] pt-20",children:(0,f.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center md:items-start p-6 pb-3 md:p-10 md:pt-6",children:[(0,f.jsx)("div",{className:"absolute inset-0 w-full h-full backdrop-saturate-[190%] backdrop-blur-3xl -z-10 mask-gradient",style:{backgroundColor:"rgba(40, 40, 40, .5)"}}),(0,f.jsx)("div",{className:"md:hidden max-w-[300px] text-text-default text-3xl text-center ",children:(0,f.jsx)("h2",{children:H})}),(0,f.jsxs)("div",{className:"text-center text-text-secondary text-sm md:text-left md:min-w-[150px] md:order-2",children:[ee.length>0&&(0,f.jsxs)("span",{children:[ee[0].name," "]}),(0,f.jsxs)("span",{children:[K," "]}),(0,f.jsxs)("span",{className:"whitespace-nowrap",children:[R," "]}),(0,f.jsx)("span",{children:$+k("min")})]}),T&&(0,f.jsx)("div",{className:"md:order-1 min-w-[150px] ",children:(0,f.jsx)(d.Z,{label:k(J?"inWatchlist":"toWatchlist"),onClick:F,variant:"white"})}),(0,f.jsx)("div",{className:"text-text-secondary order-3",children:(0,f.jsx)("span",{children:te})})]})})]})}),U&&(0,f.jsx)(p,{src:U.key,title:U.name,isError:_,isLoading:X})]})}}}]);
//# sourceMappingURL=871.a0a77b1f.chunk.js.map